<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Backend Data Viewer</h1>
    <div>
        <button id="reload-btn">Reload All Data</button>
    </div>
    <div id="data-container">Loading...</div>
    <div id="random-container"></div>
    <div id="status-container"></div>
    <div id="users-container"></div>
    <script>
        const backendUrl = '{{ context.backend_url }}';
        const dataContainer = document.getElementById('data-container');
        const randomContainer = document.getElementById('random-container');
        const statusContainer = document.getElementById('status-container');
        const usersContainer = document.getElementById('users-container');
        const reloadBtn = document.getElementById('reload-btn');

        function fetchEndpoint(endpoint, container, label) {
            container.innerHTML = `<strong>${label}:</strong> Loading...`;
            fetch(backendUrl + endpoint)
                .then(response => response.json())
                .then(data => {
                    container.innerHTML = `<strong>${label}:</strong><pre>${JSON.stringify(data, null, 2)}</pre>`;
                })
                .catch(err => {
                    container.innerHTML = `<strong>${label}:</strong> Error fetching data.`;
                });
        }

        function fetchAllData() {
            fetchEndpoint('/data', dataContainer, 'Data');
            fetchEndpoint('/random', randomContainer, 'Random');
            fetchEndpoint('/status', statusContainer, 'Status');
            fetchEndpoint('/users', usersContainer, 'Users');
        }

        reloadBtn.addEventListener('click', fetchAllData);
        window.onload = fetchAllData;
    </script>
</body>
</html>